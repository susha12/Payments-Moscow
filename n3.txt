ТЗ

Форма расчета

У нас есть следующие валюты

Наличные USD РФ
Наличные RUB РФ
Наличные EUR РФ

Наличные AED Дубаи
Наличные USD Дубаи

Тинькофф RUB
Альфабанк RUB
Сбербанк RUB
МИР RUB
Любой банк RUB

Любой банк AED

Юрлицо RUB
Юрлицо AED
Юрлицо USD


Из этих валют мы составляем следующий список, что на что может меняться

Группа 1 - Наличные РФ

Наличные USD РФ = Наличные AED Дубаи
Наличные USD РФ = Наличные USD Дубаи
Наличные USD РФ = Любой банк AED
Наличные USD РФ = Юрлицо AED
Наличные USD РФ = Юрлицо USD

Наличные RUB РФ = Наличные AED Дубаи
Наличные RUB РФ = Наличные USD Дубаи
Наличные RUB РФ = Любой банк AED
Наличные RUB РФ = Юрлицо AED
Наличные RUB РФ = Юрлицо USD

Наличные EUR РФ = Наличные AED Дубаи
Наличные EUR РФ = Наличные USD Дубаи
Наличные EUR РФ = Любой банк AED
Наличные EUR РФ = Юрлицо AED
Наличные EUR РФ = Юрлицо USD



Группа 2 - Наличные Дубаи

Наличные AED Дубаи - Тинькофф RUB
Наличные AED Дубаи - Альфабанк RUB
Наличные AED Дубаи - Сбербанк RUB
Наличные AED Дубаи - МИР RUB
Наличные AED Дубаи - Любой банк RUB
Наличные AED Дубаи - Юрлицо RUB

Наличные USD Дубаи - Тинькофф RUB
Наличные USD Дубаи - Альфабанк RUB
Наличные USD Дубаи - Сбербанк RUB
Наличные USD Дубаи - МИР RUB
Наличные USD Дубаи - Любой банк RUB
Наличные USD Дубаи - Юрлицо RUB


Группа 3 - Банки RUB 

Тинькофф RUB - Наличные AED Дубаи
Альфабанк RUB - Наличные AED Дубаи
Сбербанк RUB - Наличные AED Дубаи
МИР RUB - Наличные AED Дубаи
Любой банк RUB - Наличные AED Дубаи

Тинькофф RUB - Наличные USD Дубаи
Альфабанк RUB - Наличные USD Дубаи
Сбербанк RUB - Наличные USD Дубаи
МИР RUB - Наличные USD Дубаи
Любой банк RUB - Наличные USD Дубаи

Тинькофф RUB - Любой банк AED
Альфабанк RUB - Любой банк AED
Сбербанк RUB - Любой банк AED
МИР RUB - Любой банк AED
Любой банк RUB - Любой банк AED


Группа 4 - Юрлица

Юрлицо RUB - Юрлицо AED
Юрлицо USD - Юрлицо USD

----------------------------------------------------
Как считать курсы

Для начала откуда брать курсы
1. RUB - USD - Garantex.
* Курс продажи (RUB)
BTC: 1 459 747 USDT: 63.80 ETH: 101 389 DAI: 63.75 USDC: 63.79

Курс можно парсить с API, ключ предоставим


2. EUR - USD 
Курс берем c xe.com или 
https://www.bloomberg.com/quote/EURUSD:CUR

3. USD - AED
Курс статичен - 3.67


Как считать кросс курсы
Все расчеты идут через USD

Пример 
Как узнать курс AED к RUB
1 AED = 1/3.67 = 0.2724 ( до 4го значения )
0.27247 * Garantex ( USD/RUB = 63,80 ) = 17.3841 RUB

То есть 1 AED = 17.3841 


Обновление курсов по API - 10 минут
-------------------------------------------------------



Работа формы

Пользователь вводит значение в поле суммы
Выбирает направление "Отдаю", например "Наличные USD РФ"
В поле "Получаю" выбирает направление обмена. Например, "Наличные AED Дубаи"

Расчет суммы
 - Комиссия ( значение в %, которое берет система за услуги )
 - Курс конверсии ( кросс курс, например 1 = 3.67 ( USD - AED ) 

Пример 

Отдаю
Наличные USD РФ - 10 000$

Комиссия - 2
Кросс курс - 1 = 3.67


Получаю 
35 966 Наличные Дубаи AED

Как произошел расчет?
10 000 - 2% 
* 3.67
= 35 966 AED


---------------------------------------------------------

Откуда берется комиссия
Для написания комиссии нам потребуется отдельный файл, например commissions.php 
где будут вручную прописаны значения для направлений. Выглядит это так 


Направление обмена, например 

Наличные USD РФ = Наличные AED Дубаи
500 - 1000 ( 3% )
1001 - 5000 ( 2.5% )
5001 - 10 000 ( 2% )


Меняем вручную путем редактирования данных в файле.



----------------------------------------------------------

Обработка формы

После ввода данных и расчета в форме, нажимается кнопка "Обменять".
Появляется всплывающее окно с формой 

Структура
https://ibb.co/wgDnQJP

Данные с формы отправляем в телеграмм
Токен бота предоставим










